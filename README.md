# Valinor-c timestamp collection component for Valinor framework

This DPDK program collects timestamp records generated by Valinor-N in-network measurement framework and stores timestamp records in Redis.

More information can be found at [in our NSDI paper](https://www.usenix.org/conference/nsdi23/presentation/sharafzadeh).

Also checkout [Valinor super repository](https://github.com/hopnets/valinor-artifacts).

### Requirements for Valinor measurement framework

- dpdk-stable-20.11.4
- Redis server running on localhost


## Installation and Running

- Install and test DPDK 20.11.4
- Install Redis server and verify connection to redis-server via redis-cli
- Setup huge pages. 1GB huge pages are recommended for better performance of Valinor. For our experiments we have 40x 1GB pages allocated on runtime.
- run `git submodule init` and `git submodule update` to checkout hiredis sources. Then run `make` and `make install` under `ext/hiredis` to build and install hiredis.
- The command to run the valinor-c dataplane is `sudo ./build/valinor -- -p 0x1 -c server.json -k 0`. the `-p` flag is use by DPDK to determine the network interface used by Valinor. The `-k` flag is the key used by redis-server to store timestamp records under. The configurations in `server.json` file can be modified as needed.

## Author

Erfan Sharafzadeh

2020-2023